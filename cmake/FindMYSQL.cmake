IF(NOT MYSQL_FOUND)
  SET(MYSQL_FOUND true)
  UNSET(_inc_dirs)
  UNSET(_lib_dirs)

  IF(BUILD_IS_DEV_PLATFORM)
    UNSET(MYSQL_PATH)
    IF(DEFINED ENV{MYSQL_PATH})
      SET(MYSQL_PATH "$ENV{MYSQL_PATH}")
    ELSEIF(WIN32)
      IF(EXISTS "C:\\Program Files\\MySQL\\MySQL Server 8.0")
        SET(MYSQL_PATH "C:\\Program Files\\MySQL\\MySQL Server 8.0")
      ENDIF()
    ELSEIF(EXISTS "/usr/local/mysql")
      SET(MYSQL_PATH "/usr/local/mysql")
    ENDIF()
    IF(MYSQL_PATH)
      LIST(APPEND _inc_dirs ${MYSQL_PATH}/include)
      LIST(APPEND _lib_dirs ${MYSQL_PATH}/lib)
    ELSEIF(BUILD_PLATFORM_LINUX)
      LIST(APPEND _inc_dirs "/usr/include/mysql")
      LIST(APPEND _lib_dirs "/lib/mysql" "/lib64/mysql" "/usr/lib/mysql" "/usr/lib64/mysql")
    ENDIF()
  ENDIF()

  FIND_PATH(MYSQL_INCLUDE_DIR NAMES mysql.h PATHS ${_inc_dirs})
  MARK_AS_ADVANCED(MYSQL_INCLUDE_DIR)
  IF(NOT MYSQL_INCLUDE_DIR)
    SET(MYSQL_FOUND false)
  ENDIF()
  FIND_LIBRARY(MYSQL_CLIENT_LIBRARY NAMES mysqlclient PATHS ${_lib_dirs})
  MARK_AS_ADVANCED(MYSQL_CLIENT_LIBRARY)
  IF(NOT MYSQL_CLIENT_LIBRARY)
    SET(MYSQL_FOUND false)
  ENDIF()
  UNSET(MYSQL_LIBRARY)
  LIST(APPEND MYSQL_LIBRARY ${MYSQL_CLIENT_LIBRARY})
  MARK_AS_ADVANCED(MYSQL_LIBRARY)
  IF(MYSQL_FOUND)
    SET(MYSQL_USER_DEFINITIONS "USE_MYSQL")
    GET_FILENAME_COMPONENT(_LIB_DIR ${MYSQL_CLIENT_LIBRARY} DIRECTORY)
    MESSAGE(STATUS "[mysql] found in \"${_LIB_DIR}\"")
  ELSE()
    MESSAGE(STATUS "[mysql] not found")
  ENDIF()
ENDIF()
